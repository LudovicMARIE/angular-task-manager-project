<div class="mx-auto max-w-3xl p-4 md:p-6">
  <div class="mb-6 flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4">
    <div>
      <h1 class="text-2xl font-bold tracking-tight text-slate-900">Détails de la tâche</h1>
      <p class="mt-1 text-sm text-slate-500">Visualisez toutes les informations d'une tâche.</p>
    </div>
    <div class="flex items-center gap-2">
      <button
        [routerLink]="['/tasks']"
        type="button"
        class="inline-flex items-center gap-2 rounded-lg border border-slate-300 px-3 py-2 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50"
      >
        Retour
      </button>
    </div>
  </div>

  @if (!task()) {
  <div class="rounded-xl border border-slate-200 bg-white p-6 text-center text-slate-600 shadow-sm">
    Chargement ou tâche introuvable.
  </div>
  } @else {
  <article class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
    <header class="flex items-start justify-between gap-4">
      <div class="min-w-0 flex-1">
        <h2 class="text-xl font-semibold text-indigo-600 break-words">{{ task()?.title }}</h2>
        <div class="mt-3 flex items-center gap-3">
          <span
            class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium"
            [class]="getStatusColor(task()?.status)"
          >
            {{ task()?.status | taskStatus }}
          </span>
          <span class="text-sm text-slate-500"
            >Assignée à:
            <span class="font-medium text-slate-700"
              >{{ task()?.user?.username || 'Non assignée' }}</span
            ></span
          >
        </div>
      </div>
      <div class="text-sm text-slate-400 text-right">
        <div>
          Créée:
          <span class="text-slate-600">{{ task()?.createdAt | date:'yy/M/dd, hh:mm ' }}</span>
        </div>
        <div class="mt-1">
          Dernière mise à jour:
          <span class="text-slate-600">{{ task()?.updatedAt | date:'yy/M/dd, hh:mm '}}</span>
        </div>
      </div>
    </header>

    <section class="mt-6">
      <h3 class="text-sm font-medium text-slate-600">Description</h3>
      <p class="mt-2 text-slate-700 whitespace-pre-wrap">{{ task()?.description }}</p>
    </section>

    <footer class="mt-6 flex justify-end">
      <button
        [routerLink]="['/tasks']"
        type="button"
        class="inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"
      >
        Retour à la liste
      </button>
    </footer>
  </article>
  }
</div>
